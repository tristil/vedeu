#!/usr/bin/env ruby

require 'rake'
require 'bundler'

unless defined?(Bundler)
  raise "Bundler is required. Please install bundler with 'gem install bundler'"
end

Bundler.setup

Rake.application.init

gem_dir = File.expand_path('..', File.dirname(__FILE__))
$LOAD_PATH.unshift(gem_dir) unless $LOAD_PATH.include?(gem_dir)

# Initialize vedeu
require 'vedeu'

# Load the rake tasks of vedeu
load "#{gem_dir}/lib/vedeu/tasks/vedeu.rake"

# Let's go!
begin
  Rake.application.invoke_task(ARGV.shift)

rescue RuntimeError => exception
  puts 'Vedeu Error: Either the task you specified failed, or the task could ' \
       "not be built.\n"
  puts "Exception: #{exception.class.name}"
  puts "Message: #{exception.message}"

end

